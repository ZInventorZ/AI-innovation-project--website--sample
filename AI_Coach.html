<!doctype html>
<html lang="en">
<head>
	<meta charset="utf-8" />
	<meta name="viewport" content="width=device-width, initial-scale=1" />
	<title>AI Innovation Project - AI Coach</title>
	<link rel="stylesheet" href="style.css">
	<link href="https://cdn.jsdelivr.net/npm/bootstrap@5.3.2/dist/css/bootstrap.min.css" rel="stylesheet"/>
	<style>
		.coach-card {
			border: none;
			border-left: 4px solid var(--accent);
			box-shadow: 0 2px 8px rgba(0, 0, 0, 0.08);
			transition: transform 0.2s, box-shadow 0.2s;
			margin-bottom: 1.5rem;
		}
		.coach-card:hover {
			transform: translateY(-2px);
			box-shadow: 0 4px 12px rgba(0, 0, 0, 0.12);
		}
		.coach-card .card-header {
			border-color: transparent;
			border-radius: 0;
			padding: 1rem 1.25rem;
			font-weight: 600;
			letter-spacing: 0.5px;
		}
		.btn-objective {
			border-radius: 20px;
			padding: 0.6rem 1.5rem;
			font-weight: 500;
			transition: all 0.3s ease;
			border: 2px solid rgba(255, 193, 7, 0.3);
		}
		.btn-objective.active {
			background: linear-gradient(135deg, #FFC107 0%, #FF9800 100%);
			color: white;
			border-color: transparent;
			box-shadow: 0 4px 15px rgba(255, 193, 7, 0.4);
		}
		.btn-group-custom .btn {
			border-radius: 8px;
			padding: 0.6rem 1.2rem;
			font-weight: 500;
			margin: 0.25rem;
			flex-grow: 1;
			transition: all 0.2s;
		}
		.btn-group-custom .btn.active {
			background: var(--accent);
			color: white;
			border-color: var(--accent);
			box-shadow: 0 4px 10px rgba(13, 110, 253, 0.3);
		}
		.preset-btn {
			border-radius: 12px;
			padding: 0.8rem;
			font-weight: 500;
			background: linear-gradient(135deg, #667eea 0%, #764ba2 100%);
			border: none;
			color: white;
			transition: all 0.3s;
			box-shadow: 0 4px 15px rgba(102, 126, 234, 0.3);
		}
		.preset-btn:hover {
			transform: translateY(-2px);
			box-shadow: 0 6px 20px rgba(102, 126, 234, 0.5);
			color: white;
		}
		.header-gradient {
			background: linear-gradient(135deg, var(--accent) 0%, #0052cc 100%);
			color: white;
			padding: 2rem 1.5rem;
			border-radius: 12px;
			margin-bottom: 2rem;
		}
		.header-gradient h2 {
			font-weight: 700;
			margin: 0.5rem 0 0 0;
			letter-spacing: -0.5px;
		}
		.header-gradient p {
			margin: 0.5rem 0 0 0;
			opacity: 0.95;
			font-size: 0.95rem;
		}
		.feedback-badge {
			background: linear-gradient(135deg, #10B981 0%, #059669 100%);
			color: white;
			padding: 1.5rem;
			border-radius: 12px;
			margin-top: 1.5rem;
			box-shadow: 0 4px 15px rgba(16, 185, 129, 0.3);
		}
		.feedback-badge strong {
			display: block;
			font-size: 1.1rem;
			margin-bottom: 0.5rem;
		}
		#feedback-display {
			animation: slideDown 0.3s ease;
		}
		@keyframes slideDown {
			from {
				opacity: 0;
				transform: translateY(-10px);
			}
			to {
				opacity: 1;
				transform: translateY(0);
			}
		}
		.section-label {
			font-weight: 700;
			color: var(--accent);
			text-transform: uppercase;
			letter-spacing: 1px;
			font-size: 0.85rem;
			margin-bottom: 1rem;
			display: block;
		}
		.modal-content {
			border: none;
			border-radius: 16px;
			box-shadow: 0 10px 40px rgba(0, 0, 0, 0.15);
		}
		.modal-header {
			border-bottom: none;
			padding: 1.5rem;
			border-radius: 16px 16px 0 0;
		}
		.large-btn {
			padding: 1rem;
			font-size: 1rem;
			border-radius: 10px;
			font-weight: 600;
			transition: all 0.2s;
			box-shadow: 0 4px 12px rgba(0, 0, 0, 0.1);
		}
		.large-btn:hover {
			transform: translateY(-2px);
			box-shadow: 0 6px 16px rgba(0, 0, 0, 0.15);
		}
		.site-main {
			padding-bottom: 100px;
		}
	</style>
</head>
<body>
	<!-- Top-left back button: tries history.back(), falls back to index.html -->
	<a class="back-btn" href="index.html" onclick="if(history.length>1){history.back();return false;}">â† Back</a>
	<header class="page-header">
		<div class="container">
			<div class="d-flex align-items-center gap-3">
				<img src="images/AIchery_logo_full_sized.png" alt="AIchery Logo" style="max-width: 150px; height: auto;">
				<div>
					<h1 style="margin: 0;">AI Coach</h1>
				</div>
			</div>
		</div>
	</header>
	<nav class="navbar navbar-expand-lg navbar-dark bg-dark fixed-bottom">
    <div class="container-fluid">
      <div class="collapse navbar-collapse" id="navbarNav">
        <ul class="nav nav-pills ms-auto" role="tablist">
          <li class="nav-item"><a class="nav-link" href="index.html"><span class="nav-icon">ğŸ“ˆ</span>History</a></li>
          <li class="nav-item"><a class="nav-link active" href="AI_Coach.html"><span class="nav-icon">ğŸ¤–</span>AI Coach</a></li>
          <li class="nav-item"><a class="nav-link" href="equipment.html"><span class="nav-icon">ğŸ¹</span>Equipment</a></li>
          <li class="nav-item"><a class="nav-link" href="statistics.html"><span class="nav-icon">ğŸ“Š</span>Statistics</a></li>
          <li class="nav-item"><a class="nav-link" href="competition.html"><span class="nav-icon">ğŸ†</span>Competition</a></li>
          <li class="nav-item"><a class="nav-link" href="menu.html"><span class="nav-icon">â˜°</span>Menu</a></li>
        </ul>
      </div>
    </div>
  </nav>

	<main class="site-main container py-4">
		
		<!-- DRILLS SECTION -->
		<div class="coach-card card">
			<div class="card-header" style="background: linear-gradient(135deg, #FF6B6B 0%, #FF8E72 100%); color: white;">
				<strong>âš¡ Drills & Training</strong>
			</div>
			<div class="card-body">
				<div class="mb-4">
					<span class="section-label">Training Focus</span>
					<div class="row g-2 mb-3">
						<div class="col-6">
							<button id="objStrength" class="btn btn-objective w-100 active" data-objective="strength">ğŸ’ª Strength</button>
						</div>
						<div class="col-6">
							<button id="objEndurance" class="btn btn-objective w-100" data-objective="endurance">ğŸƒ Endurance</button>
						</div>
						<div class="col-12">
							<button id="objConsistency" class="btn btn-objective w-100" data-objective="consistency">ğŸ¯ Consistency</button>
						</div>
					</div>
				</div>

				<div class="mb-4">
					<span class="section-label">Difficulty Level</span>
					<div class="btn-group w-100 mb-3" role="group">
						<button id="diffbegin" class="btn btn-outline-secondary btn-group-custom">Beginner</button>
						<button id="diffinter" class="btn btn-outline-secondary btn-group-custom active">Intermediate</button>
						<button id="diffadv" class="btn btn-outline-secondary btn-group-custom">Advanced</button>
					</div>
				</div>
				
				<div class="mb-4">
					<span class="section-label">Preset Drills</span>
					<div class="row g-2">
						<div class="col-6">
							<button id="presetShort" class="btn preset-btn w-100 btn-sm">Short Range</button>
						</div>
						<div class="col-6">
							<button id="presetComp" class="btn preset-btn w-100 btn-sm">Competition</button>
						</div>
						<div class="col-6">
							<button id="presetEnd" class="btn preset-btn w-100 btn-sm">Endurance</button>
						</div>
						<div class="col-6">
							<button id="presetWarm" class="btn preset-btn w-100 btn-sm">Warm-up</button>
						</div>
					</div>
				</div>

				<div class="d-grid gap-2 mt-4">
					<button id="scheduleBtn" class="btn btn-lg btn-info large-btn">ğŸ“… Weekly Practice Schedule</button>
				</div>
			</div>
		</div>

		<!-- FORM ANALYSIS SECTION -->
		<div class="coach-card card">
			<div class="card-header" style="background: linear-gradient(135deg, #4CAF50 0%, #45a049 100%); color: white;">
				<strong>ğŸ¥ Form Analysis</strong>
			</div>
			<div class="card-body">
				<div class="mb-4">
					<span class="section-label">Experience Level</span>
					<div class="btn-group w-100 mb-3" role="group">
						<button id="expBeginner" class="btn btn-outline-success btn-group-custom">Beginner</button>
						<button id="expIntermediate" class="btn btn-outline-success btn-group-custom active">Intermediate</button>
						<button id="expAdvanced" class="btn btn-outline-success btn-group-custom">Advanced</button>
					</div>
				</div>

				<div class="mb-4">
					<span class="section-label">Settings</span>
					<div class="form-check form-switch mb-2">
						<input class="form-check-input" type="checkbox" id="liveFeedback" checked>
						<label class="form-check-label" for="liveFeedback">Live feedback during shooting</label>
					</div>
					<div class="form-check form-switch mb-3">
						<input class="form-check-input" type="checkbox" id="soundEnabled" checked>
						<label class="form-check-label" for="soundEnabled">Sound notifications</label>
					</div>
				</div>

				<div class="d-grid gap-2">
					<button id="analyseForm" class="btn btn-lg btn-warning large-btn">ğŸ“¸ Start Form Analysis</button>
					<div class="d-flex gap-2 mt-2">
						<button id="newPracticeNameBtn" class="btn btn-outline-primary flex-grow-1">ï¼‹ New Practice</button>
						<button id="createUnidentifiedBtn" class="btn btn-outline-danger flex-grow-1">Unidentified</button>
					</div>
					<button id="viewStats" class="btn btn-info large-btn">ğŸ“Š View Session Stats</button>
					<button id="getTips" class="btn btn-success large-btn">ğŸ’¡ Get Tips</button>
				</div>
			</div>
		</div>

		<div id="feedback-display" class="feedback-badge" style="display:none">
			<strong>âœ¨ AI Coach Feedback</strong>
			<div id="feedback-content"></div>
		</div>
	</main>

	<script src="https://cdn.jsdelivr.net/npm/bootstrap@5.3.2/dist/js/bootstrap.bundle.min.js"></script>
	<script>
	(function(){
		// AI Coach state
		const coachState = {
			objective: 'strength',
			difficulty: 'intermediate',
			experienceLevel: 'intermediate',
			liveFeedbackEnabled: true,
			soundEnabled: true
		};

		// Save state to localStorage
		function saveState(){
			localStorage.setItem('aiCoachState', JSON.stringify(coachState));
		}

		// Load state from localStorage
		function loadState(){
			const saved = localStorage.getItem('aiCoachState');
			if(saved){
				Object.assign(coachState, JSON.parse(saved));
			}
		}

		// Initialize UI based on state
		function initializeUI(){
			loadState();
			
			// Set objective buttons
			document.querySelectorAll('[data-objective]').forEach(btn=>{
				btn.classList.toggle('active', btn.dataset.objective === coachState.objective);
			});
			
			// Set difficulty buttons
			document.getElementById('diffbegin').classList.toggle('active', coachState.difficulty === 'beginner');
			document.getElementById('diffinter').classList.toggle('active', coachState.difficulty === 'intermediate');
			document.getElementById('diffadv').classList.toggle('active', coachState.difficulty === 'advanced');
			
			// Set experience level buttons
			document.getElementById('expBeginner').classList.toggle('active', coachState.experienceLevel === 'beginner');
			document.getElementById('expIntermediate').classList.toggle('active', coachState.experienceLevel === 'intermediate');
			document.getElementById('expAdvanced').classList.toggle('active', coachState.experienceLevel === 'advanced');
			
			// Set checkboxes
			document.getElementById('liveFeedback').checked = coachState.liveFeedbackEnabled;
			document.getElementById('soundEnabled').checked = coachState.soundEnabled;
		}

		// Training Objectives
		document.getElementById('objStrength').addEventListener('click', ()=>{
			coachState.objective = 'strength';
			document.querySelectorAll('[data-objective]').forEach(b=>b.classList.remove('active'));
			document.getElementById('objStrength').classList.add('active');
			saveState();
			showFeedback('ğŸ’ª Strength Focus: Building power and draw consistency. Focus on maintaining tension in core and back muscles.');
		});
		document.getElementById('objEndurance').addEventListener('click', ()=>{
			coachState.objective = 'endurance';
			document.querySelectorAll('[data-objective]').forEach(b=>b.classList.remove('active'));
			document.getElementById('objEndurance').classList.add('active');
			saveState();
			showFeedback('ğŸƒ Endurance Focus: Building stamina for longer sessions. Practice multiple rounds with shorter rest periods.');
		});
		document.getElementById('objConsistency').addEventListener('click', ()=>{
			coachState.objective = 'consistency';
			document.querySelectorAll('[data-objective]').forEach(b=>b.classList.remove('active'));
			document.getElementById('objConsistency').classList.add('active');
			saveState();
			showFeedback('ğŸ¯ Consistency Focus: Improving shot-to-shot consistency. Standardize your technique for every arrow.');
		});

		// Difficulty selection
		document.getElementById('diffbegin').addEventListener('click', ()=>{
			coachState.difficulty = 'beginner';
			document.querySelectorAll('[id^="diff"]').forEach(b=>b.classList.remove('active'));
			document.getElementById('diffbegin').classList.add('active');
			saveState();
		});
		document.getElementById('diffinter').addEventListener('click', ()=>{
			coachState.difficulty = 'intermediate';
			document.querySelectorAll('[id^="diff"]').forEach(b=>b.classList.remove('active'));
			document.getElementById('diffinter').classList.add('active');
			saveState();
		});
		document.getElementById('diffadv').addEventListener('click', ()=>{
			coachState.difficulty = 'advanced';
			document.querySelectorAll('[id^="diff"]').forEach(b=>b.classList.remove('active'));
			document.getElementById('diffadv').classList.add('active');
			saveState();
		});

		// Experience Level selection
		document.getElementById('expBeginner').addEventListener('click', ()=>{
			coachState.experienceLevel = 'beginner';
			document.querySelectorAll('[id^="exp"]').forEach(b=>b.classList.remove('active'));
			document.getElementById('expBeginner').classList.add('active');
			saveState();
			showFeedback('ğŸ”° Beginner Mode: Focus on fundamental techniques and basic form corrections.');
		});
		document.getElementById('expIntermediate').addEventListener('click', ()=>{
			coachState.experienceLevel = 'intermediate';
			document.querySelectorAll('[id^="exp"]').forEach(b=>b.classList.remove('active'));
			document.getElementById('expIntermediate').classList.add('active');
			saveState();
			showFeedback('ğŸ“ˆ Intermediate Mode: Refined technique improvements and advanced form feedback.');
		});
		document.getElementById('expAdvanced').addEventListener('click', ()=>{
			coachState.experienceLevel = 'advanced';
			document.querySelectorAll('[id^="exp"]').forEach(b=>b.classList.remove('active'));
			document.getElementById('expAdvanced').classList.add('active');
			saveState();
			showFeedback('ğŸ† Advanced Mode: Competitive-level analysis with detailed micro-adjustments.');
		});

		// Checkbox listeners
		document.getElementById('liveFeedback').addEventListener('change', (e)=>{
			coachState.liveFeedbackEnabled = e.target.checked;
			saveState();
		});
		document.getElementById('soundEnabled').addEventListener('change', (e)=>{
			coachState.soundEnabled = e.target.checked;
			saveState();
		});

		// Preset drills
		document.getElementById('presetShort').addEventListener('click', ()=>{
			showFeedback('Short Range Preset loaded: 3 ends of 3 arrows at 18m - Perfect for warm-ups and quick drills.');
		});
		document.getElementById('presetComp').addEventListener('click', ()=>{
			showFeedback('Competition Preset loaded: 10 ends of 3 arrows at 50m (Vegas 300 format) - Full competition simulation.');
		});
		document.getElementById('presetEnd').addEventListener('click', ()=>{
			showFeedback('Endurance Preset loaded: 20 ends of 6 arrows at 25m - Build stamina and consistency.');
		});
		document.getElementById('presetWarm').addEventListener('click', ()=>{
			showFeedback('Warm-up Preset loaded: 2 ends of 3 arrows at multiple distances - Prepare for main practice session.');
		});

		// Practice Schedule Button
		document.getElementById('scheduleBtn').addEventListener('click', ()=>{
			const schedule = {
				'Monday': 'ğŸ’ª Strength Training (30 min) - Focus on form and power building',
				'Tuesday': 'Rest or Light Practice',
				'Wednesday': 'ğŸ¯ Consistency Drills (45 min) - Shot-to-shot repeatability',
				'Thursday': 'Rest or Light Practice', 
				'Friday': 'ğŸƒ Endurance Session (60 min) - Multiple rounds, building stamina',
				'Saturday': 'ğŸ† Competition Simulation (90 min) - Full rounds under pressure',
				'Sunday': 'ğŸ“Š Analysis & Recovery - Review footage and plan improvements'
			};
			
			let scheduleHtml = '<div style="max-height:400px;overflow-y:auto">';
			for(const [day, activity] of Object.entries(schedule)){
				scheduleHtml += `<div style="padding:8px;border-bottom:1px solid #ddd"><strong>${day}:</strong> ${activity}</div>`;
			}
			scheduleHtml += '</div>';
			
			const mdl = document.createElement('div');
			mdl.innerHTML = `<div class="modal fade" tabindex="-1"><div class="modal-dialog modal-lg"><div class="modal-content"><div class="modal-header"><h5 class="modal-title">ğŸ“… Weekly Practice Schedule</h5><button type="button" class="btn-close" data-bs-dismiss="modal"></button></div><div class="modal-body">${scheduleHtml}</div><div class="modal-footer"><button class="btn btn-secondary" data-bs-dismiss="modal">Close</button></div></div></div></div>`;
			document.body.appendChild(mdl);
			const bsModal = new bootstrap.Modal(mdl.querySelector('.modal'));
			bsModal.show();
			mdl.querySelector('.modal').addEventListener('hidden.bs.modal', ()=> mdl.remove());
		});

		// Available images for feedback
		const feedbackImages = [
			'images/ready_to_fire.jpg',
			'images/full_draw_setting anchor.jpg',
			'images/back_angled.webp',
			'images/center_X_target.jpg'
		];

		// Fake feedback based on experience level
		const feedbackData = {
			'beginner': [
				'Good foot positioning! Keep your shoulders relaxed and avoid tension.',
				'Your draw length looks consistent. Maintain this position for better accuracy.',
				'Nice anchor point! Try to keep your elbow slightly higher for better alignment.',
				'Your stance is solid. Focus on keeping your head still during the release.'
			],
			'intermediate': [
				'Excellent back tension! You\'re maintaining good load throughout the draw.',
				'Very consistent form. Minor adjustment: rotate your hips slightly more for better energy transfer.',
				'Your release is smooth, but try to minimize wrist motion for better follow-through.',
				'Great shoulder engagement! Keep this level of tension for competition-ready form.'
			],
			'advanced': [
				'Excellent micro-load execution! Your load-transfer phase is highly efficient.',
				'Precise bow arm tracking detected. Minimal oscillation - competitive-level consistency.',
				'Outstanding release timing. Your arrow departure velocity signature is optimal.',
				'Hip rotation perfectly synchronized with draw curve. Professional-level mechanics detected.'
			]
		};

		// Tools
		document.getElementById('analyseForm').addEventListener('click', ()=>{
			const mdl = document.createElement('div');
			const expLevel = coachState.experienceLevel.charAt(0).toUpperCase() + coachState.experienceLevel.slice(1);
			const randomImage = feedbackImages[Math.floor(Math.random() * feedbackImages.length)];
			const feedbackList = feedbackData[coachState.experienceLevel];
			const randomFeedback = feedbackList[Math.floor(Math.random() * feedbackList.length)];
			
			const analysis = {
				'beginner': '<ul><li>Stance and foot position</li><li>Basic anchor point consistency</li><li>Draw length uniformity</li><li>Follow-through stability</li></ul>',
				'intermediate': '<ul><li>Advanced anchor consistency and micro-movements</li><li>Back/shoulder tension balance</li><li>Release technique refinement</li><li>Head/neck position during execution</li><li>Draw curve smoothness</li></ul>',
				'advanced': '<ul><li>Micro-adjustments in hip rotation</li><li>Precision bow arm tracking</li><li>Advanced release timing analysis</li><li>Load/transfer efficiency</li><li>Competitive-level form optimization</li></ul>'
			};
			mdl.innerHTML = `<div class="modal fade" tabindex="-1"><div class="modal-dialog modal-lg"><div class="modal-content"><div class="modal-header"><h5 class="modal-title">ğŸ“¸ Form Analysis - ${expLevel}</h5><button type="button" class="btn-close" data-bs-dismiss="modal"></button></div><div class="modal-body"><p><strong>Analysis will evaluate:</strong></p>${analysis[coachState.experienceLevel]}<p class="text-muted mt-3">ğŸ“± Position device at 45Â° angle for best results. Ensure adequate lighting.</p></div><div class="modal-footer"><button class="btn btn-secondary" data-bs-dismiss="modal">Close</button><button id="startRecordingBtn" class="btn btn-primary">Analyze Sample</button></div></div></div></div>`;
			document.body.appendChild(mdl);
			const bsModal = new bootstrap.Modal(mdl.querySelector('.modal'));
			bsModal.show();
			// hook up button to show analysis
			const startBtn = mdl.querySelector('#startRecordingBtn');
			if(startBtn){
				startBtn.addEventListener('click', ()=>{
					bsModal.hide();
					// show analysis modal with image and feedback
					const analysis = document.createElement('div');
					analysis.innerHTML = `<div class="modal fade" tabindex="-1"><div class="modal-dialog modal-lg"><div class="modal-content"><div class="modal-header bg-success text-white"><h5 class="modal-title">âœ… Analysis Complete - ${expLevel} Level</h5><button type="button" class="btn-close btn-close-white" data-bs-dismiss="modal"></button></div><div class="modal-body"><div class="row"><div class="col-md-6"><h6>Sample Form Image</h6><img src="${randomImage}" alt="Form Analysis" style="max-width:100%;border-radius:8px;border:2px solid #28a745;"></div><div class="col-md-6"><h6>AI Coach Feedback</h6><div class="alert alert-info"><p style="margin:0;"><strong>ğŸ’¡ Analysis Result:</strong></p><p style="margin:0.5rem 0 0 0;">${randomFeedback}</p></div><div class="alert alert-light"><strong>Recommendations:</strong><ul><li>Maintain this form consistency across all shots</li><li>Practice this technique in varied conditions</li><li>Record more sessions to track improvement</li></ul></div></div></div></div><div class="modal-footer"><button class="btn btn-secondary" data-bs-dismiss="modal">Close</button><button id="saveAnalysisBtn" class="btn btn-success">Save to Session</button></div></div></div></div>`;
					document.body.appendChild(analysis);
					const bsAnalysis = new bootstrap.Modal(analysis.querySelector('.modal'));
					bsAnalysis.show();
					analysis.querySelector('#saveAnalysisBtn').addEventListener('click', ()=>{
						showFeedback('âœ… Analysis saved to current session!');
						bsAnalysis.hide();
					});
					analysis.querySelector('.modal').addEventListener('hidden.bs.modal', ()=> analysis.remove());
				});
			}
			mdl.querySelector('.modal').addEventListener('hidden.bs.modal', ()=> mdl.remove());
		});

		// New Practice Name button: add a practice template
		document.getElementById('newPracticeNameBtn').addEventListener('click', ()=>{
			const name = prompt('New practice/template name:');
			if(!name) return;
			const tpl = { id: Date.now(), name: name, distances: [], weather: 'indoor', equipmentSetupId: null };
			const tpls = JSON.parse(localStorage.getItem('practiceTemplates')||'[]');
			tpls.unshift(tpl);
			localStorage.setItem('practiceTemplates', JSON.stringify(tpls));
			showFeedback('Template saved: ' + name);
		});

		// Create an 'Unidentified Practice' placeholder saved to practices
		document.getElementById('createUnidentifiedBtn').addEventListener('click', ()=>{
			if(!confirm('Create an "Unidentified Practice" placeholder session?')) return;
			const practices = JSON.parse(localStorage.getItem('practices')||'[]');
			const p = { id: Date.now(), name: 'Unidentified Practice', created: new Date().toISOString(), notes: 'Auto-created unidentified practice', totalScore: null };
			practices.push(p);
			localStorage.setItem('practices', JSON.stringify(practices));
			showFeedback('Unidentified Practice created');
		});

		document.getElementById('viewStats').addEventListener('click', ()=>{
			const practices = JSON.parse(localStorage.getItem('practices')||'[]');
			const scored = practices.filter(p=>p.totalScore!=null);
			if(!scored.length){
				showFeedback('No practice sessions recorded yet. Start a session to see stats!');
				return;
			}
			const avgScore = (scored.reduce((a,b)=>a+b.totalScore, 0)/scored.length).toFixed(0);
			const bestScore = Math.max(...scored.map(p=>p.totalScore));
			showFeedback(`Session Stats:<br/>â€¢ Average Score: ${avgScore}<br/>â€¢ Best Score: ${bestScore}<br/>â€¢ Total Sessions: ${scored.length}`);
		});

		document.getElementById('getTips').addEventListener('click', ()=>{
			const tips = [
				'Focus on consistency: Shoot the same routine every time.',
				'Maintain a steady anchor point throughout your draw.',
				'Practice your breathing: Exhale during the release for stability.',
				'Keep your bow arm relaxed and let the string push it away.',
				'Practice distance shooting regularly to build confidence.',
				'Record your sessions to analyze form improvements over time.',
				'Warm up properly before competing or practicing.',
				'Mental preparation is as important as physical technique.',
				'Consistency drills build muscle memory - practice the same distance repeatedly.',
				'Film yourself from different angles to catch form issues early.'
			];
			const tip = tips[Math.floor(Math.random() * tips.length)];
			showFeedback('ğŸ’¡ Tip: ' + tip);
		});

		function showFeedback(message){
			const display = document.getElementById('feedback-display');
			const content = document.getElementById('feedback-content');
			content.innerHTML = message;
			display.style.display = 'block';
			setTimeout(()=>{
				display.style.display = 'none';
			}, 5000);
		}

		// Initialize on load
		initializeUI();
	})();
	</script>
	<script>
		// Catch unhandled button clicks and show error
		document.addEventListener('click', (e) => {
			const btn = e.target.closest('button:not([data-bs-dismiss])'); 
			if(!btn) return;
			if(btn.onclick || btn.getAttribute('onclick')) return;
			if(!btn.id && !btn.getAttribute('data-action')) {
				e.preventDefault();
				alert('This feature is not yet implemented.');
			}
		});
	</script>
</body>
</html>