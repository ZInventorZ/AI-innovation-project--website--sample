<!doctype html>
<html lang="en">
<head>
  <meta charset="utf-8" />
  <meta name="viewport" content="width=device-width, initial-scale=1" />
  <title>Edit Profile</title>
  <link rel="stylesheet" href="style.css">
  <link href="https://cdn.jsdelivr.net/npm/bootstrap@5.3.2/dist/css/bootstrap.min.css" rel="stylesheet"/>
  <link rel="icon" href="images/AIchery_logo.png" type="image/png">
</head>
<body>
  <a class="back-btn" href="index.html" onclick="if(history.length>1){history.back();return false;}">â† Back</a>
  <header class="page-header"><div class="container"><h1>Edit Profile</h1></div></header>
  <nav class="navbar navbar-expand-lg navbar-dark bg-dark fixed-bottom">
    <div class="container-fluid">
      <a class="navbar-brand" href="index.html">AI Innovation</a>
      <div class="collapse navbar-collapse" id="navbarNav">
        <ul class="nav nav-pills ms-auto">
          <li class="nav-item"><a class="nav-link" href="index.html"><span class="nav-icon">ğŸ“ˆ</span>History</a></li>
          <li class="nav-item"><a class="nav-link" href="AI_Coach.html"><span class="nav-icon">ğŸ¤–</span>AI Coach</a></li>
          <li class="nav-item"><a class="nav-link" href="equipment.html"><span class="nav-icon">ğŸ¹</span>Equipment</a></li>
          <li class="nav-item"><a class="nav-link" href="statistics.html"><span class="nav-icon">ğŸ“Š</span>Statistics</a></li>
          <li class="nav-item"><a class="nav-link active" href="profile_edit.html"><span class="nav-icon">ğŸ‘¤</span>Profile</a></li>
        </ul>
      </div>
    </div>
  </nav>

  <main class="site-main container py-4">
    <form id="profileForm" class="row g-3">
      <div class="col-12"><label class="form-label">Display Name</label><input id="p_name" class="form-control" placeholder="Your name"></div>
      <div class="col-12"><label class="form-label">Email</label><input id="p_email" class="form-control" type="email" placeholder="you@example.com"></div>
      <div class="col-6"><label class="form-label">Preferred Distance (m)</label><input id="p_distance" class="form-control" type="number"></div>
      <div class="col-6"><label class="form-label">Default Ends</label><input id="p_ends" class="form-control" type="number"></div>

      <hr style="width:100%"/>
      <h5 class="mt-2">Athlete Profile</h5>
      <div class="col-6"><label class="form-label">Eye Dominance</label>
        <select id="p_eye" class="form-select">
          <option value="right">Right</option>
          <option value="left">Left</option>
        </select>
      </div>
      <div class="col-6"><label class="form-label">Draw Length (in)</label><input id="p_draw" class="form-control" type="number" step="0.1"></div>
      <div class="col-6"><label class="form-label">Draw Weight (lbs)</label><input id="p_poundage" class="form-control" type="number"></div>
      <div class="col-6"><label class="form-label">Sight / Pins</label><input id="p_pins" class="form-control" placeholder="e.g. S3DA"></div>
      <div class="col-6"><label class="form-label">Competition Class / Bow Type</label><input id="p_class" class="form-control" placeholder="e.g. NFAA modern bowhunter"></div>
      <div class="col-6"><label class="form-label">Years Shooting</label><input id="p_years" class="form-control" type="number" min="0"></div>

      <div class="col-12"><button class="btn btn-primary" id="saveProfile">Save Profile</button></div>
    </form>
    <div id="profileStatus" class="mt-2 text-success"></div>
  </main>

  <script src="https://cdn.jsdelivr.net/npm/bootstrap@5.3.2/dist/js/bootstrap.bundle.min.js"></script>
  <script>
    function getProfile(){return JSON.parse(localStorage.getItem('profile')||'null');}
    function saveProfile(p){localStorage.setItem('profile',JSON.stringify(p));}
    (function(){
      const form=document.getElementById('profileForm');
      const status=document.getElementById('profileStatus');
      const existing=getProfile();
      // Prefill with provided defaults if profile missing
      const defaults = { eye:'right', draw:29.5, poundage:55, pins:'S3DA', class:'NFAA modern bowhunter', years:3 };
      const profile = existing || defaults;
      // if no existing profile, persist defaults for this user
      if(!existing){ saveProfile(profile); }
      document.getElementById('p_name').value=profile.name||'';
      document.getElementById('p_email').value=profile.email||'';
      document.getElementById('p_distance').value=profile.distance||'';
      document.getElementById('p_ends').value=profile.ends||'';
      document.getElementById('p_eye').value=profile.eye||defaults.eye;
      document.getElementById('p_draw').value=profile.draw||defaults.draw;
      document.getElementById('p_poundage').value=profile.poundage||defaults.poundage;
      document.getElementById('p_pins').value=profile.pins||defaults.pins;
      document.getElementById('p_class').value=profile.class||defaults.class;
      document.getElementById('p_years').value=profile.years||defaults.years;

      form.addEventListener('submit',e=>{
        e.preventDefault();
        const p={
          name:document.getElementById('p_name').value,
          email:document.getElementById('p_email').value,
          distance:Number(document.getElementById('p_distance').value)||null,
          ends:Number(document.getElementById('p_ends').value)||null,
          eye:document.getElementById('p_eye').value,
          draw:parseFloat(document.getElementById('p_draw').value)||null,
          poundage:parseFloat(document.getElementById('p_poundage').value)||null,
          pins:document.getElementById('p_pins').value,
          class:document.getElementById('p_class').value,
          years:parseInt(document.getElementById('p_years').value)||0
        };
        saveProfile(p); status.textContent='Saved âœ“'; setTimeout(()=>status.textContent='',2000);
      })
    })();
  </script>
</body>
</html>
